/*
	UIZE JAVASCRIPT FRAMEWORK 2011-12-23

	http://www.uize.com/reference/Uize.Fade.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Fade',builder:function(b_a){var b_b,b_c='object',b_d=Uize.constrain;var b_e={},b_f=[],b_g=false,b_h;function b_i(){if((b_g= !!b_f.length)!= !!b_h)b_h=b_g?setInterval(b_j,10):clearInterval(b_h);}function b_j(){for(var b_k= -1,b_l;++b_k<b_f.length;)(b_l=b_f[b_k]).b_m?b_l.b_j():b_f.splice(b_k--,1);b_i();}var b_n=b_a.subclass(),b_o=b_n.prototype;b_o.b_p=function(){var b_q=this,b_r=b_s(b_q.b_t,b_q.b_u,b_q.b_v,b_q.b_w,b_q.b_x,b_q.b_r);if(b_r!=b_e)b_r!=b_q.b_r?b_q.set({b_r:b_r}):b_q.fire('Changed.value');};b_o.b_j=function(){var b_y=Math.min(((Date.now?Date.now(): +new Date)-this.b_z)/this.b_A,1);this.set({b_v:this.b_B?1-b_y:b_y});if(b_y==1){this.stop();this.fire('Done');}};b_o.stop=function(){this.set({b_m:false});};b_o.start=function(b_C){this.stop();this.set(Uize.copyInto({b_m:true},b_C));};var b_s=b_n.blendValues=function(b_D,b_E,b_F,b_w,b_x,b_G){if(b_D===b_E){return b_G!==b_b&&b_D===b_G?b_e:b_D;}else{if(Uize.isFunction(b_x)){b_F=b_x(b_F);b_x=b_b;}
if(typeof b_D==b_c&&b_D&& !(b_D instanceof RegExp)){var b_H=b_G&&typeof b_G==b_c,b_I=b_w&&typeof b_w==b_c,b_J=b_x&&typeof b_x==b_c,b_K=b_H?b_G:Uize.isArray(b_D)?[]:{},b_L;for(var b_M in b_D){var b_N=b_s(b_D[b_M],b_E[b_M],b_F,b_I?b_w[b_M]:b_w,b_J?b_x[b_M]:b_x,b_L=b_K[b_M]);if(b_H)b_H=b_N==b_e||(typeof b_N!=b_c&&b_N==b_L);if(b_N!=b_e)b_K[b_M]=b_N;}return b_H?b_e:b_K;}else{var b_K= !b_F?b_D:b_F==1?b_E: !b_w?b_D+(b_E-b_D)*b_F:b_F>0&&b_F<1?b_d(b_D+Math.round((b_E-b_D)*b_F/b_w)*b_w,b_D,b_E):b_D+Math.round((b_E-b_D)*b_F/b_w)*b_w;return b_G!==b_b&&b_K===b_G?b_e:b_K;}}};b_n.celeration=function(b_O,b_P){var b_Q=1-(b_O=b_O||0)-(b_P=b_P||0),b_R=2/(1+b_Q),b_S=b_O?b_R/b_O:0,b_T=b_S/2,b_U=b_P? -b_R/b_P:0,b_V=b_U/2,b_W=b_O*b_O,b_X;return(b_Q>=1?Uize.returnX:function(b_r){return((b_r=(b_O?b_d(b_r*b_r,0,b_W)*b_T:0)+(b_Q?b_R*b_d(b_r-b_O,0,b_Q):0)+(b_P?((b_R+(b_X=b_d(b_r-b_O-b_Q,0,b_P))*b_V)*b_X):0))>1?1:b_r);});};function b_Y(){this.set({b_x:this.b_O||this.b_P?b_n.celeration(this.b_O,this.b_P):null});}function b_Z(){
this.b_r=null;this.b_p();}b_n.registerProperties({b_O:{name:'acceleration',onChange:b_Y},b_x:{name:'curve',onChange:b_Z},b_P:{name:'deceleration',onChange:b_Y},b_A:{name:'duration',value:2000},b_u:{name:'endValue',onChange:b_Z,value:100},b_m:{name:'inProgress',onChange:function(){var b_q=this;if(b_q.b_m){b_q.b_z=Date.now?Date.now(): +new Date;b_q.fire('Start');b_q.b_r=b_q.b_v=null;b_q.b_j();b_f.push(b_q);b_i();}},value:false},b_v:{name:'progress',onChange:b_o.b_p,value:0},b_B:'reverse',b_t:{name:'startValue',onChange:b_Z,value:0},b_w:'quantization',b_r:{name:'value',value:0}});return b_n;}});