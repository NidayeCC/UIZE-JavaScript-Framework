/*
	UIZE JAVASCRIPT FRAMEWORK 2012-07-08

	http://www.uize.com/reference/Uize.Build.AutoScruncher.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Build.AutoScruncher',required:['Uize.Wsh','Uize.Build.Scruncher','Uize.Date','Uize.String','Uize.String.Lines','Uize.Util.Oop'],builder:function(){var _a=function(){};_a.getScrunchedFolderPath=function(_b,_c,_d){var _e=Uize.Wsh.getScriptFolderPath(),_f=_d?_d.length:0;return(_f?(_b.slice(-_f)==_d?_b.slice(0,-_f-1):null):(_c&&_e+'\\'+_c)+_b.substr(_e.length));};_a.perform=function(_g){var _h=Uize.Date.toIso8601(),_i=/\.js$/,_j=WScript.ScriptName,_k=_g.scrunchedHeadComments||{},_l='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';function _m(_b){return _a.getScrunchedFolderPath(_b,_g.buildFolderPath,_g.sourceFolderName);}Uize.Wsh.buildFiles(Uize.copyInto({logFileName:_j.replace(_i,'-js-files.log'),targetFolderPathCreator:_m,targetFilenameCreator:function(_n){return _i.test(_n)?_n:null;},fileBuilder:function(_n,_o){var _p=_n.replace(_i,''),_q={},_r=_k[_n.slice(0,_n.indexOf('.'))],_s=_r==undefined;if(!_s)_q.KEEPHEADCOMMENT='FALSE';Uize.module({required:_p,builder:function(){
var _t=Uize.Util.Oop.getInheritanceChain(eval(_p)).length;_q.MAPPINGS='='+(_t?_l.charAt(_t-1):'')+','+_p.replace(/\./g,'_');}});var _u=Uize.Build.Scruncher.scrunch(_o,_q);return{outputText:(_s?'':Uize.substituteInto(_r,{buildDate:_h,moduleName:_p},'{KEY}'))+_u.scrunchedCode,logDetails:Uize.String.Lines.indent(_u.report,2)+'\n'};}},_g));var _v=/\/\*\s*Library\s*Contents/i,_w=/^[a-zA-Z_$]/,_x=_m(Uize.Wsh.getScriptFolderPath()+'\\'+_g.moduleFolderPath),_y='/*______________\n'+'|       ______  |   B U I L T     O N     U I Z E     F R A M E W O R K\n'+'|     /      /  |   ---------------------------------------------------\n'+'|    /    O /   |   This JavaScript application is developed using the object\n'+'|   /    / /    |   oriented UIZE JavaScript framework as its foundation.\n'+'|  /    / /  /| |\n'+'| /____/ /__/_| |    ONLINE : http://www.uize.com\n'+'|          /___ |   LICENSE : Available under MIT License or GNU General Public License\n'+
'|_______________|             http://www.uize.com/license.html\n'+'*/\n\n';Uize.Wsh.buildFiles(Uize.copyInto({targetFolderPathCreator:_m,targetFilenameCreator:function(_n){return/\.library.js$/.test(_n)?_n:null;},fileBuilder:function(_n,_o){function _z(_A){var _B=_A.indexOf('/*');return(_B> -1?(_A.slice(0,_B)+_A.slice(_A.indexOf('*/',_B+2)+2)):_A);}var _C=[],_D;for(var _E= -1,_F=_o.search(_v),_G=_o.indexOf('*/',_F),_H=Uize.String.Lines.split(_F> -1?_o.slice(_F,_G).replace(_v,''):_o),_I=_H.length;++_E<_I;){var _p=Uize.String.trim(_H[_E]);if(_p&&_w.test(_p)){if(!_D)_D=Uize.String.startsWith(_p,'Uize');_C.push('\n'+_z(Uize.Wsh.readFile(_x+'\\'+_p+(_i.test(_p)?'':'.js'))));}}return{outputText:(_D?_y:'')+_o.slice(0,_F)+_C.join('\n')+_o.slice(_G+2)};}},_g,{alwaysBuild:true,logFileName:_j.replace(_i,'-libraries.log')}));};return _a;}});