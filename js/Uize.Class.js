/*
	UIZE JAVASCRIPT FRAMEWORK

	http://www.uize.com/reference/Uize.Class.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Class',builder:function(a_a){var a_b,a_c='string',a_d='object',a_e=Uize,a_f=a_e.clone,a_g=a_e.copyInto,a_h=a_e.forEach,a_i=a_e.map,a_j=a_e.lookup,a_k=a_e.getClass,a_l=a_e.getGuid,a_m=a_e.globalEval,a_n=a_e.isArray,a_o=a_e.isFunction,a_p=a_e.isInstance,a_q=a_e.isObject,a_r=a_e.noNew,a_s=a_e.pairUp;var a_t=[],a_u={};var a_v=a_w(function(){},function(){this.instanceId=a_l();},function(a_x){a_x||(a_x=a_u);var a_y={},a_z=this.Class.a_z,a_A,a_B;for(a_A in a_z){if(a_A in a_x)a_y[a_A]=a_x[a_A];else if((a_B=a_z[a_A])!==a_b)a_y[a_A]=a_B;}for(a_A in a_x)a_A in a_y||(a_y[a_A]=a_x[a_A]);this.set(a_y);}),a_C=a_v.prototype,a_D=a_v.nonInheritableStatics;function a_E(a_F,a_G){var a_v=a_k(a_F);return(a_v.a_H[a_G]||a_v.a_I[a_G]);}function a_J(a_F,a_G){var a_K=a_E(a_F,a_G);return a_K?a_K.a_L:a_G;}a_v.a_M=a_C.a_M=function(a_N,a_O){if(a_N.charCodeAt(0)==67&& !a_N.indexOf('Changed.')){var a_F=this,a_P=a_N.slice(8),a_K=a_E(a_F,a_P);if(a_K&&a_P!=a_K.a_Q)a_N='Changed.'+(a_P=a_K.a_Q);a_O(a_N);
(a_F.a_R||(a_F.a_R={}))[a_P]=a_F.a_S&&a_F.a_S[a_N];}else{a_O(a_N);}};a_v.wire=a_C.wire=function(a_T,a_U){var a_F=this;if(arguments.length==2){a_F.a_M(a_T,function(a_N){var a_S=a_F.a_S||(a_F.a_S={});(a_S[a_N]||(a_S[a_N]=[])).push({a_N:a_N,a_U:a_o(a_U)?a_U:typeof a_U==a_c?new Function(a_U):function(a_V){a_U.fire(a_V)},a_W:a_U});});}else if(a_q(a_T)){for(var a_N in a_T)this.wire(a_N,a_T[a_N]);}};a_v.fire=a_C.fire=function(a_V){if(typeof a_V!=a_d)a_V={name:a_V};var a_F=this,a_S=a_F.a_S;if(a_S){var a_X=a_S[a_V.name],a_Y=a_S['*'];if(a_X||a_Y){a_V.source||(a_V.source=a_F);var a_Z=a_Y&&a_X?a_Y.concat(a_X):a_Y||a_X,a_0=a_Z.length;if(a_0==1){a_Z[0].a_U(a_V);}else if(a_0==2){var a_1=a_Z[0].a_U,a_2=a_Z[1].a_U;a_1(a_V);a_2(a_V);}else{if(!a_Y|| !a_X)a_Z=a_Z.concat();for(var a_3= -1;++a_3<a_0;)a_Z[a_3].a_U(a_V);}}}if(a_V.bubble&&a_F.parent&&a_p(a_F)){a_V.source||(a_V.source=a_F);a_F.parent.fire(a_V);}return a_V;};a_v.unwire=a_C.unwire=function(a_T,a_U){var a_F=this,a_S=a_F.a_S;if(a_S){if(a_q(a_T)){for(var a_N in a_T)
a_F.unwire(a_N,a_T[a_N]);}else{a_F.a_M(a_T,function(a_N){var a_4=a_S[a_N];if(a_4){if(a_U){for(var a_3=a_4.length;--a_3>=0;)a_4[a_3].a_W==a_U&&a_4.splice(a_3,1);}(a_U&&a_4.length)||delete a_S[a_N];}});}}};var a_5=new Function('a','b','var f; return eval ("f = function (" + a.join (",") + ") {" + b + "}")');var a_6={};function a_7(a_8){var a_9=a_8+'',a_ba=a_6[a_9];function a_bb(a_bc){return a_bc.replace(/\s+/g,'').split(',');}if(!a_ba){var a_bd,a_be;if(Uize.isFunction(a_8)){a_bd=a_bb((a_8+'').match(/\(([^\)]*)\)/)[1]);a_be=a_8;}else{if(typeof a_8=='string'){var a_bf=a_8.indexOf(':');if(a_bf> -1){a_be=a_5(a_bd=a_bb(a_8.slice(0,a_bf)),'return '+a_8.slice(a_bf+1));}else{a_8=a_bb(a_8);}}if(Uize.isArray(a_8)){a_bd=[];if(a_8.length){var a_bg=[],a_bh=[];a_h(a_8,function(a_bi,a_bj){var a_bk=a_bi.charCodeAt(0)==33,a_bl='a'+a_bj;a_bd.push(a_bk?a_bi.slice(1):a_bi);a_bg.push(a_bl);a_bh.push((a_bk?'!':'')+a_bl);});a_be=a_5(a_bg,'return '+a_bh.join(' && '));}else{a_be=a_e.returnTrue;}}}a_ba=a_6[a_9]={a_bd:a_bd,
a_bm:new Function('return ['+a_i(a_bd,'"this.get(\'" + value + "\')"').join(',')+']'),a_be:a_be,a_bn:a_i(a_bd,'"Changed." + value')};}return a_ba;}a_C.once=function(a_bo,a_U){var a_F=this,a_8=a_7(a_bo),a_bd=a_8.a_bd,a_bm=a_8.a_bm,a_be=a_8.a_be,a_bp;function a_bq(){var a_br=a_bm.call(a_F),a_bs=a_be.apply(0,a_br);if(a_bs){a_bp&&a_F.unwire(a_bp);a_U.apply(0,a_br);}return a_bs;}if(a_bq()){a_bp={};}else{a_F.wire(a_bp=a_j(a_8.a_bn,a_bq));}return a_bp;};a_C.is=function(a_A){return!!this[a_J(this,a_A)];};a_C.met=function(a_bt){this.set(a_bt,true);};a_C.unmet=function(a_bt){this.set(a_bt,false);};a_v.get=a_C.get=function(a_A){if(typeof a_A==a_c){return this[a_J(this,a_A)];}else{var a_F=this,a_bu={};if(!a_A){var a_v=a_k(a_F),a_I=a_v.a_I;for(var a_bv in a_I)a_bu[a_I[a_bv].a_Q]=a_F[a_bv];}else if(a_n(a_A)){for(var a_bw= -1,a_bx=a_A.length;++a_bw<a_bx;){var a_by=a_A[a_bw];a_bu[a_by]=a_F[a_J(a_F,a_by)];}}else{for(var a_by in a_A)a_bu[a_by]=a_F[a_J(a_F,a_by)];}return a_bu;}};a_v.registerProperties=function(a_bz){var
 a_F=this,a_I=a_F.a_I,a_H=a_F.a_H;for(var a_bv in a_bz){var a_bA=a_bz[a_bv],a_bB=a_q(a_bA),a_P=(a_bB?a_bA.name:a_bA)||a_bv,a_bC=a_P,a_K=a_I[a_bv]={a_L:a_bv};if(a_P.indexOf('|')> -1){var a_bD=a_P.split('|');a_bC=a_bD[0];a_j(a_bD,a_K,a_H);}else{a_H[a_P]=a_K;}a_K.a_Q=a_bC;if(a_bB){if(a_bA.onChange)a_K.a_bE=a_bA.onChange;if(a_bA.conformer)a_K.a_bF=a_bA.conformer;a_F[a_bv]=a_bA.value;}}a_F.a_z=this.get();};a_v.set=a_C.set=function(a_x){var a_bG=arguments,a_bH=a_bG.length;if(a_bH>1)a_x=a_bH>2||typeof a_x==a_c?a_s.apply(0,a_bG):a_j(a_x,a_bG[1]);var a_F=this,a_bI=a_p(a_F),a_v=a_bI?a_F.Class:a_F,a_H=a_v.a_H,a_I=a_v.a_I,a_K,a_bJ,a_bK,a_bL,a_R=a_bI&&a_F.a_R,a_bM=a_R&&a_R['*'],a_bN,a_bO,a_bv,a_P,a_bP,a_bQ,a_bR;for(var a_G in a_x){a_bQ=a_x[a_G];if(a_K=a_H[a_G]||a_I[a_G]){a_bv=a_K.a_L;a_P=a_K.a_Q;}else{(a_bP||(a_bP={}))[a_bv=a_P=a_G]=a_K=a_bI?{}:{value:a_bQ};}if(a_bI)(a_bR||(a_bR={}))[a_P]=a_K.a_bF?(a_bQ=a_K.a_bF.call(a_F,a_bQ,a_F[a_bv])):a_bQ;if(a_bQ!==a_F[a_bv]){if(a_bI){a_bM&&((a_bN||(a_bN={}))[a_P]=a_bQ);
a_R&&a_R[a_P]&&(a_bO||(a_bO=[])).push(a_P);function a_bS(a_bL){if(a_o(a_bL)){if(!a_bJ){a_bJ=[];a_bK=a_F.instanceId+'_handlerAlreadyAdded';}if(!a_bL[a_bK]){a_bL[a_bK]=1;a_bJ.push(a_bL);}}else if(typeof a_bL==a_c){a_bS(a_F[a_bL]);}else if(a_n(a_bL)){a_h(a_bL,a_bS);}}a_K.a_bE&&a_bS(a_K.a_bE);}a_F[a_bv]=a_bQ;}}a_bP&&a_v.registerProperties(a_bP);if(a_bI){if(a_bJ){for(var a_3= -1,a_bT=a_bJ.length;++a_3<a_bT;){delete(a_bL=a_bJ[a_3])[a_bK];a_bL.call(a_F,a_bR);}}a_bN&&a_F.fire({name:'Changed.*',properties:a_bN});if(a_bO){for(var a_bU= -1,a_bV=a_bO.length;++a_bU<a_bV;)a_F.fire('Changed.'+a_bO[a_bU]);}}else{a_v.a_z=this.get();}};a_v.toggle=a_C.toggle=function(a_bW){var a_bX= !this.get(a_bW);this.set(a_bW,a_bX);return a_bX;};a_C.kill=function(){var a_bY=this.instanceId;a_m('if(typeof '+a_bY+'!=\'undefined\')'+a_bY+'=null');};function a_w(a_v,a_bZ,a_b0){function a_b1(){var a_b2=[],a_b3=a_e.toString;a_h(this.get(),function(a_bQ,a_bW){a_b2.push(a_bW+' : '+(a_bQ&&(a_p(a_bQ)||a_o(a_bQ))?a_b3.call(a_bQ):a_bQ));});
return a_b3.call(this)+'\n\n'+a_b2.sort().join('\n');}function a_b4(){return this[a_J(this,'value')];}var a_C=a_v.prototype,a_b5=a_r(function(){for(var a_b6= -1,a_b7=a_b8.length;++a_b6<a_b7;)a_b8[a_b6].apply(this,arguments);for(var a_b9= -1,a_ca=a_cb.length;++a_b9<a_ca;)a_cb[a_b9].apply(this,arguments);}),a_cc=a_b5.prototype;var a_bQ,a_cd=a_v.nonInheritableStatics||a_u;for(var a_A in a_v)if(!a_cd[a_A]&&(a_bQ=a_v[a_A])!=a_C&& !(a_o(a_bQ)&&a_bQ.moduleName&&/[A-Z]/.test(a_A.charAt(0))))a_b5[a_A]=a_f(a_bQ);a_g(a_cc,a_C);a_cc.toString=a_b1;a_cc.valueOf=a_b4;a_cc.Class=a_b5;a_b5.nonInheritableStatics={a_ce:1,nonInheritableStatics:1,toString:0,valueOf:0};a_b5.superclass=a_v;a_b5.toString=a_b1;a_b5.valueOf=a_b4;var a_b8=a_b5.a_b8=(a_v.a_b8||a_t).concat(),a_cb=a_b5.a_cb=(a_v.a_cb||a_t).concat();a_bZ&&a_b8.push(a_bZ);a_b0&&a_cb.push(a_b0);a_b5.a_I||(a_b5.a_I={});a_b5.a_H||(a_b5.a_H={});return a_b5;};a_v.subclass=function(a_bZ,a_b0){return a_w(this,a_bZ,a_b0);};a_v.singleton=function(a_cf,a_x){var
 a_ce=this.a_ce||(this.a_ce={}),a_cg=a_ce[a_cf||(a_cf='')];a_cg?a_x&&a_cg.set(a_x):(a_cg=a_ce[a_cf]=this(a_x));return a_cg;};return a_v;}});