/*
	UIZE JAVASCRIPT FRAMEWORK

	http://www.uize.com/reference/Uize.Class.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Class',builder:function(a_a){var a_b,a_c='string',a_d='object',a_e=Uize,a_f=a_e.clone,a_g=a_e.copyInto,a_h=a_e.forEach,a_i=a_e.getClass,a_j=a_e.getGuid,a_k=a_e.globalEval,a_l=a_e.isArray,a_m=a_e.isFunction,a_n=a_e.isInstance,a_o=a_e.isObject,a_p=a_e.noNew,a_q=a_e.pairUp;var a_r=[],a_s={};var a_t=a_u(function(){},function(){this.instanceId=a_j();},function(a_v){a_v||(a_v=a_s);var a_w={},a_x=this.Class.a_x,a_y,a_z;for(a_y in a_x){if(a_y in a_v)a_w[a_y]=a_v[a_y];else if((a_z=a_x[a_y])!==a_b)a_w[a_y]=a_z;}for(a_y in a_v)a_y in a_w||(a_w[a_y]=a_v[a_y]);this.set(a_w);}),a_A=a_t.prototype,a_B=a_t.nonInheritableStatics;function a_C(a_D,a_E){var a_t=a_i(a_D);return(a_t.a_F[a_E]||a_t.a_G[a_E]);}function a_H(a_D,a_E){var a_I=a_C(a_D,a_E);return a_I?a_I.a_J:a_E;}a_t.a_K=a_A.a_K=function(a_L,a_M){if(a_L.charCodeAt(0)==67&& !a_L.indexOf('Changed.')){var a_D=this,a_N=a_L.slice(8),a_I=a_C(a_D,a_N);if(a_I&&a_N!=a_I.a_O)a_L='Changed.'+(a_N=a_I.a_O);a_M(a_L);(a_D.a_P||(a_D.a_P={}))[a_N]=
a_D.a_Q&&a_D.a_Q[a_L];}else{a_M(a_L);}};a_t.wire=a_A.wire=function(a_R,a_S){var a_D=this;if(arguments.length==2){a_D.a_K(a_R,function(a_L){var a_Q=a_D.a_Q||(a_D.a_Q={});(a_Q[a_L]||(a_Q[a_L]=[])).push({a_L:a_L,a_S:a_m(a_S)?a_S:typeof a_S==a_c?new Function(a_S):function(a_T){a_S.fire(a_T)},a_U:a_S});});}else if(a_o(a_R)){for(var a_L in a_R)this.wire(a_L,a_R[a_L]);}};a_t.fire=a_A.fire=function(a_T){if(typeof a_T!=a_d)a_T={name:a_T};var a_D=this,a_Q=a_D.a_Q;if(a_Q){var a_V=a_Q[a_T.name],a_W=a_Q['*'];if(a_V||a_W){a_T.source||(a_T.source=a_D);var a_X=a_W&&a_V?a_W.concat(a_V):a_W||a_V,a_Y=a_X.length;if(a_Y==1){a_X[0].a_S(a_T);}else if(a_Y==2){var a_Z=a_X[0].a_S,a_0=a_X[1].a_S;a_Z(a_T);a_0(a_T);}else{if(!a_W|| !a_V)a_X=a_X.concat();for(var a_1= -1;++a_1<a_Y;)a_X[a_1].a_S(a_T);}}}if(a_T.bubble&&a_D.parent&&a_n(a_D)){a_T.source||(a_T.source=a_D);a_D.parent.fire(a_T);}return a_T;};a_t.unwire=a_A.unwire=function(a_R,a_S){var a_D=this,a_Q=a_D.a_Q;if(a_Q){if(a_o(a_R)){for(var a_L in a_R)a_D.unwire(a_L,a_R[a_L]);}else{
a_D.a_K(a_R,function(a_L){var a_2=a_Q[a_L];if(a_2){if(a_S){for(var a_1=a_2.length;--a_1>=0;)a_2[a_1].a_U==a_S&&a_2.splice(a_1,1);}(a_S&&a_2.length)||delete a_Q[a_L];}});}}};var a_3=new Function('a','b','var f; return eval ("f = function (" + a.join (",") + ") {" + b + "}")');var a_4={};function a_5(a_6){var a_7=a_6+'',a_8=a_4[a_7];function a_9(a_ba){return a_ba.replace(/\s+/g,'').split(',');}if(!a_8){var a_bb,a_bc;if(Uize.isFunction(a_6)){a_bb=a_9((a_6+'').match(/\(([^\)]*)\)/)[1]);a_bc=a_6;}else{if(typeof a_6=='string'){var a_bd=a_6.indexOf(':');if(a_bd> -1){a_bc=a_3(a_bb=a_9(a_6.slice(0,a_bd)),'return '+a_6.slice(a_bd+1));}else{a_6=a_9(a_6);}}if(Uize.isArray(a_6)){a_bb=Uize.map(a_6,'value.charCodeAt (0) == 33 ? value.slice (1) : value');a_bc=a_3(a_bb,'return '+(a_6.length?a_6.join(' && '):'true'));}}a_8=a_4[a_7]={a_bb:a_bb,a_be:new Function('return ['+Uize.map(a_bb,'"this.get(\'" + value + "\')"').join(',')+']'),a_bc:a_bc,a_bf:Uize.map(a_bb,'"Changed." + value')};}return a_8;}a_A.once=function(a_bg,a_S){var
 a_D=this,a_6=a_5(a_bg),a_bb=a_6.a_bb,a_be=a_6.a_be,a_bc=a_6.a_bc,a_bh;function a_bi(){var a_bj=a_be.call(a_D),a_bk=a_bc.apply(0,a_bj);if(a_bk){a_bh&&a_D.unwire(a_bh);a_S.apply(0,a_bj);}return a_bk;}if(a_bi()){a_bh={};}else{a_D.wire(a_bh=Uize.lookup(a_6.a_bf,a_bi));}return a_bh;};a_A.is=function(a_y){return!!this[a_H(this,a_y)];};a_A.met=function(a_bl){this.set(a_bl,true);};a_A.unmet=function(a_bl){this.set(a_bl,false);};a_t.get=a_A.get=function(a_y){if(typeof a_y==a_c){return this[a_H(this,a_y)];}else{var a_D=this,a_bm={};if(!a_y){var a_t=a_i(a_D),a_G=a_t.a_G;for(var a_bn in a_G)a_bm[a_G[a_bn].a_O]=a_D[a_bn];}else if(a_l(a_y)){for(var a_bo= -1,a_bp=a_y.length;++a_bo<a_bp;){var a_bq=a_y[a_bo];a_bm[a_bq]=a_D[a_H(a_D,a_bq)];}}else{for(var a_bq in a_y)a_bm[a_bq]=a_D[a_H(a_D,a_bq)];}return a_bm;}};a_t.registerProperties=function(a_br){var a_D=this,a_G=a_D.a_G,a_F=a_D.a_F;for(var a_bn in a_br){var a_bs=a_br[a_bn],a_bt=a_o(a_bs),a_N=(a_bt?a_bs.name:a_bs)||a_bn,a_bu=a_N,a_I=a_G[a_bn]={a_J:a_bn};
if(a_N.indexOf('|')> -1){var a_bv=a_N.split('|');a_bu=a_bv[0];a_e.lookup(a_bv,a_I,a_F);}else{a_F[a_N]=a_I;}a_I.a_O=a_bu;if(a_bt){if(a_bs.onChange)a_I.a_bw=a_bs.onChange;if(a_bs.conformer)a_I.a_bx=a_bs.conformer;a_D[a_bn]=a_bs.value;}}a_D.a_x=this.get();};a_t.set=a_A.set=function(a_v){var a_by=arguments,a_bz=a_by.length;if(a_bz>1)a_v=a_bz>2||typeof a_v==a_c?a_q.apply(0,a_by):a_e.lookup(a_v,a_by[1]);var a_D=this,a_bA=a_n(a_D),a_t=a_bA?a_D.Class:a_D,a_F=a_t.a_F,a_G=a_t.a_G,a_I,a_bB,a_bC,a_bD,a_P=a_bA&&a_D.a_P,a_bE=a_P&&a_P['*'],a_bF,a_bG,a_bn,a_N,a_bH,a_bI,a_bJ;for(var a_E in a_v){a_bI=a_v[a_E];if(a_I=a_F[a_E]||a_G[a_E]){a_bn=a_I.a_J;a_N=a_I.a_O;}else{(a_bH||(a_bH={}))[a_bn=a_N=a_E]=a_I=a_bA?{}:{value:a_bI};}if(a_bA)(a_bJ||(a_bJ={}))[a_N]=a_I.a_bx?(a_bI=a_I.a_bx.call(a_D,a_bI,a_D[a_bn])):a_bI;if(a_bI!==a_D[a_bn]){if(a_bA){a_bE&&((a_bF||(a_bF={}))[a_N]=a_bI);a_P&&a_P[a_N]&&(a_bG||(a_bG=[])).push(a_N);function a_bK(a_bD){if(a_m(a_bD)){if(!a_bB){a_bB=[];a_bC=a_D.instanceId+'_handlerAlreadyAdded';}if(!a_bD[a_bC]){
a_bD[a_bC]=1;a_bB.push(a_bD);}}else if(typeof a_bD==a_c){a_bK(a_D[a_bD]);}else if(a_l(a_bD)){a_h(a_bD,a_bK);}}a_I.a_bw&&a_bK(a_I.a_bw);}a_D[a_bn]=a_bI;}}a_bH&&a_t.registerProperties(a_bH);if(a_bA){if(a_bB){for(var a_1= -1,a_bL=a_bB.length;++a_1<a_bL;){delete(a_bD=a_bB[a_1])[a_bC];a_bD.call(a_D,a_bJ);}}a_bF&&a_D.fire({name:'Changed.*',properties:a_bF});if(a_bG){for(var a_bM= -1,a_bN=a_bG.length;++a_bM<a_bN;)a_D.fire('Changed.'+a_bG[a_bM]);}}else{a_t.a_x=this.get();}};a_t.toggle=a_A.toggle=function(a_bO){var a_bP= !this.get(a_bO);this.set(a_bO,a_bP);return a_bP;};a_A.kill=function(){var a_bQ=this.instanceId;a_k('if(typeof '+a_bQ+'!=\'undefined\')'+a_bQ+'=null');};function a_u(a_t,a_bR,a_bS){function a_bT(){var a_bU=[],a_bV=a_e.toString;a_h(this.get(),function(a_bI,a_bO){a_bU.push(a_bO+' : '+(a_bI&&(a_n(a_bI)||a_m(a_bI))?a_bV.call(a_bI):a_bI));});return a_bV.call(this)+'\n\n'+a_bU.sort().join('\n');}function a_bW(){return this[a_H(this,'value')];}var a_A=a_t.prototype,a_bX=a_p(function(){for(
var a_bY= -1,a_bZ=a_b0.length;++a_bY<a_bZ;)a_b0[a_bY].apply(this,arguments);for(var a_b1= -1,a_b2=a_b3.length;++a_b1<a_b2;)a_b3[a_b1].apply(this,arguments);}),a_b4=a_bX.prototype;var a_bI,a_b5=a_t.nonInheritableStatics||a_s;for(var a_y in a_t)if(!a_b5[a_y]&&(a_bI=a_t[a_y])!=a_A&& !(a_m(a_bI)&&a_bI.moduleName&&/[A-Z]/.test(a_y.charAt(0))))a_bX[a_y]=a_f(a_bI);a_g(a_b4,a_A);a_b4.toString=a_bT;a_b4.valueOf=a_bW;a_b4.Class=a_bX;a_bX.nonInheritableStatics={a_b6:1,nonInheritableStatics:1,toString:0,valueOf:0};a_bX.superclass=a_t;a_bX.toString=a_bT;a_bX.valueOf=a_bW;var a_b0=a_bX.a_b0=(a_t.a_b0||a_r).concat(),a_b3=a_bX.a_b3=(a_t.a_b3||a_r).concat();a_bR&&a_b0.push(a_bR);a_bS&&a_b3.push(a_bS);a_bX.a_G||(a_bX.a_G={});a_bX.a_F||(a_bX.a_F={});return a_bX;};a_t.subclass=function(a_bR,a_bS){return a_u(this,a_bR,a_bS);};a_t.singleton=function(a_b7,a_v){var a_b6=this.a_b6||(this.a_b6={}),a_b8=a_b6[a_b7||(a_b7='')];a_b8?a_v&&a_b8.set(a_v):(a_b8=a_b6[a_b7]=this(a_v));return a_b8;};return a_t;}});