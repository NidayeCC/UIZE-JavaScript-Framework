TODO
- the icon state mechanism makes assumptions about CSS implementation. This should be fixed.

